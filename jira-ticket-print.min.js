String.prototype.truncate=function(c){var d=this.length,e="…",b=e.length,a=this;if(d>c){a=this.substr(0,(c-b))+e}return a};String.prototype.trimWhitespace=function(){return this.replace(/\s+/g," ").split(/\n/).join(" ")};var xing=xing||{};xing.jira=xing.jira||{};xing.jira.Data=function(a){this.data={};this.collectDataFromDom=function(){var b=a("#greenhopper-agile-issue-web-panel dd");this.data={number:a("#key-val").text()||"",description:a("#description-val").html()||"",dueDate:a("#due-date time").text()||"",members:["Björn","Christian","Jan","Johannes","Magith","Mark","Tanja"],type:a("#type-val img").attr("alt")||"",reporter:a("#reporter-val span").text()||"",created:a("#create-date time").text()||"",title:a("#summary-val a").text()||"",component:a("#components-field").text()||"",target:b[0]?b.text().trimWhitespace():""}};this.collectDataFromDom()};xing.jira.Table=(function(c){function d(e){return"text" in e?e.text:""}function a(f,h){h=" "+h||"";var j=f.options||{},g="cssClass" in j?j.cssClass:"",i="",k;c.extend(j,{cssClass:g+h});if(j.cssClass===" "){delete j.cssClass}for(k in j){var e=k==="cssClass"?"class":k,l=j[k]||"";e=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();i+=" "+e+'="'+l+'"'}return i}var b={row:function(f,g){var e="";c(g).each(function(i,h){e+=b.cell(h)});return"<tr"+a(g)+">"+e+"</tr>"},cell:function(h){var g=h.cell,f="",e=h.head?"th":"td";f+=b.cellTitle(g);f+=b.cellBody(g);return"<"+e+a(g)+'><div class="gm-inner">'+f+"</div></"+e+">"},cellBody:function(g){var f="";if("body" in g){var e=g.body;f+="<div"+a(e,"gm-bd")+">"+d(e)+"</div>"}return f},cellTitle:function(f){var e="";if("title" in f){var g=f.title;e+="<div"+a(g,"gm-hd")+">"+d(g)+"</div>"}return e},build:function(f){var e="";c(f).each(function(g,h){e+=b.row(g,h)});return'<table class="gm-table">'+e+"</table>"},getFormat:function(e){return b.format=[[{head:true,cell:{options:{cssClass:"gm-number gm-center gm-20"},body:{text:e.number,options:{cssClass:"h1"}}}},{head:true,cell:{options:{colspan:4,cssClass:"gm-title"},body:{text:e.title.truncate(74),options:{cssClass:"h2 gm-hyphen"}}}}],[{cell:{options:{rowspan:1},title:{text:"Due date"},body:{options:{cssClass:"h4"},text:e.dueDate}}},{cell:{options:{colspan:4,cssClass:"gm-pairing"},title:{text:"Pairing",options:{cssClass:"gm-snap-left h5"}},body:{text:e.members.join(" "),options:{cssClass:"gm-snap-left h5"}}}}],[{cell:{title:{text:"Type"},body:{text:e.type}}},{cell:{options:{rowspan:4,colspan:4,cssClass:"gm-desc gm-hyphen"},}}],[{cell:{title:{text:"Reporter"},body:{text:e.reporter}}}],[{cell:{title:{text:"Component"},body:{text:e.component}}}],[{cell:{title:{text:"Target"},body:{text:e.target}}}],[{cell:{title:{text:"Created"},body:{text:e.created}}},{cell:{options:{cssClass:"gm-date-content"},title:{text:"Start Progress"},body:{text:"Day | Time"}}},{cell:{options:{cssClass:"gm-date-content"},title:{text:"End date"},body:{text:"Day | Time"}}},{cell:{options:{cssClass:"gm-qa"},title:{text:"QA passed"},body:{text:""}}},{cell:{title:{text:"Release"}}}]]}};return b}(jQuery));xing.jira.Application=(function(e){function d(g){var f=e(g.target),h=f.hasClass("gm-container")&&f||f.parents(".gm-container");if(!h[0]){a()}}function a(f){e("#gm-popup").remove();e(document).unbind("click",d)}function c(){if(e(".gm-show-popup")[0]){return false}var h=e('<li class="toolbar-item"></li>'),g=e('<a href="#print" class="gm-show-popup toolbar-trigger">Print Card</a>'),f=e(".toolbar-group");e(f[f.length-1]).append(h.append(g));g.bind("click",function(i){i.preventDefault();b.showPopup();setTimeout(function(){e(document).click(d)},1)})}var b={addStyle:function(g){var f,h=document.getElementById("gm-style");f=document.getElementsByTagName("head")[0];if(!h){if(!f){return}h=document.createElement("style");h.setAttribute("id","gm-style");h.type="text/css";h.media="screen,print";f.appendChild(h)}h.innerHTML+=g+"\n"},showPopup:function(){var f=new xing.jira.Data(jQuery).data,g=xing.jira.Table,h=g.getFormat(f);if(e(".gm-popup")[0]){return false}e("body").append(e('<div id="gm-popup">  <div class="gm-container aui-popup box-shadow">    <h2 class="aui-popup-heading">Print preview</h2>    <div class="aui-popup-content">      <div class="form-body">'+g.build(h)+'      </div>      <div class="buttons-container form-footer">        <div class="buttons">          <button class="gm-print aui-button">Print</button>          <a class="gm-cancel cancel" href="#">Cancel</a>        </div>      </div>    </div>  </div>  <div class="aui-blanket"></div></div>'));e(".gm-container").delegate(".gm-print","click",function(i){i.preventDefault();window.print()}).delegate(".gm-cancel","click",function(i){i.preventDefault();a()})},init:function(f){b.addStyle(f);c()},};return b}(jQuery));;xing.jira.Application.init('.gm-table{border-collapse:collapse;font:10pt helvetica,arial,sans-serif;background-color:#FFF;width:100%}.gm-table,.gm-table th,.gm-table td{border:.1mm solid #DDD}.gm-table td{vertical-align:top}.gm-hd{font-size:.8em;line-height:1.4em;text-transform:uppercase;text-align:left;color:#999}.h1{font-size:3em}.h2{font-size:2.4em}.h4{font-size:1.4em;line-height:1.5em}.h5{font-size:.8em;line-height:1.4em}.gm-snap-left{float:left}.gm-10{width:10%}.gm-20{width:20%}.gm-center{text-align:center}.gm-left{text-align:left}.gm-title .gm-inner{overflow:hidden;padding-bottom:0}.gm-hyphen{-wekit-hyphens:auto;-moz-hyphens:auto;-ms-hyphens:auto;-o-hyphens:auto;hyphens:auto}.gm-inner{padding:2mm 3mm}.gm-desc .gm-inner{overflow:hidden;padding-bottom:0}.gm-number .gm-bd{word-break:break-all}.gm-pairing .gm-inner{overflow:hidden}.gm-pairing .gm-hd{padding-right:3mm}.gm-pairing .gm-bd{overflow:hidden}.gm-qa .gm-bd{border:1px solid #DDD;-webkit-border-radius:2em;-moz-border-radius:2em;-ms-border-radius:2em;-o-border-radius:2em;border-radius:2em;height:40px;margin:auto;width:40px}.gm-date-content .gm-hd{padding:0 0 1px;text-align:center}.gm-date-content .gm-bd{color:#DDD;font-size:.7em;text-align:center;text-transform:uppercase}.gm-container .gm-print{margin:0 10px 0 0}@media print{html,body{background-color:white}#page,.aui-blanket,.gm-container .form-footer,.gm-container .aui-popup-heading{display:none}.gm-container{-webkit-box-shadow:none!important;-moz-box-shadow:none!important;-ms-box-shadow:none!important;-o-box-shadow:none!important;box-shadow:none!important;left:0;margin:0;padding:0;position:absolute;top:0;width:100%;z-index:2501}.gm-container .form-body{padding:0!important}}@media screen{.gm-container{left:50%;margin-left:-9cm;margin-top:5%;top:0;width:18.9cm}.gm-container .form-body{padding:2mm!important}}')