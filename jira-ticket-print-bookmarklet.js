javascript:void(function(){String.prototype.truncate=function(c){var d=this.length,e="â€¦",b=e.length,a=this;if(d>c){a=this.substr(0,(c-b))+e}return a};String.prototype.trimWhitespace=function(){return this.replace(/\s+/g," ").split(/\n/).join(" ")};var xing=xing||{};xing.jira=xing.jira||{};xing.jira.DataCollector=(function(d){function b(e){return e.split(/,/)}var a=d("#greenhopper-agile-issue-web-panel dd"),c={STORAGE_KEY:"jira-collaborators",observers:[],data:{},subscribe:function(e){this.observers.push(e)},unsubscribe:function(f){var e=this.observer.indexOf(f);if(e>=0){this.observers.splice(e)}},update:function(e){this.data=d.extend(this.data,e||{});this.observers.forEach(function(f){f.update()})},addCollaborators:function(){var f=localStorage.getItem(c.STORAGE_KEY)||"",e=window.prompt('Please enter your collaborators!\nNote: Separate the names with a comma e.g. "Jeffrey, Walter"',f||"");if(!!e&&f!==e){localStorage.setItem(this.STORAGE_KEY,e);this.update({collaborators:b(e)})}},getCollaborators:function(){var e=localStorage.getItem(c.STORAGE_KEY)||"";return b(e)}};c.update({number:d("#key-val").text()||"",description:d("#description-val").text()||"",dueDate:d("#due-date time").text()||"",collaborators:c.getCollaborators(),type:d("#type-val img").attr("alt")||"",reporter:d("#reporter-val span").text()||"",created:d("#create-datetime").text()||"",title:d("#summary-val").text()||"",component:d("#components-field").text()||"",target:a[0]?a.text().trimWhitespace():""});return c}(jQuery));var xing=xing||{};xing.jira=xing.jira||{};xing.jira.tableFormat=function(a){return[[{head:true,cell:{options:{cssClass:"gm-number gm-center gm-20"},body:{text:a.number,options:{cssClass:"h1"}}}},{head:true,cell:{options:{colspan:4,cssClass:"gm-title"},body:{text:a.title.truncate(74),options:{cssClass:"h2 gm-hyphen"}}}}],[{cell:{options:{rowspan:1},title:{text:"Due date"},body:{options:{cssClass:"h4"},text:a.dueDate}}},{cell:{options:{colspan:4,cssClass:"gm-pairing"},title:{text:"Pairing",options:{cssClass:"gm-snap-left h5"}},body:{text:a.collaborators.join(" ")+'<button id="gm-add-collaborator">Add Collaborators</button>',options:{cssClass:"gm-snap-left h5"}}}}],[{cell:{title:{text:"Type"},body:{text:a.type}}},{cell:{options:{rowspan:4,colspan:4,cssClass:"gm-desc gm-hyphen"}}}],[{cell:{title:{text:"Reporter"},body:{text:a.reporter}}}],[{cell:{title:{text:"Component"},body:{text:a.component}}}],[{cell:{title:{text:"Target"},body:{text:a.target}}}],[{cell:{title:{text:"Created"},body:{text:a.created}}},{cell:{options:{cssClass:"gm-date-content startprogress"},title:{text:"Start Progress"},body:{text:"Day | Time"}}},{cell:{options:{cssClass:"gm-date-content"},title:{text:"End date"},body:{text:"Day | Time"}}},{cell:{options:{cssClass:"gm-qa"},title:{text:"QA passed"},body:{text:""}}},{cell:{title:{text:"Release"}}}]]};var xing=xing||{};xing.jira=xing.jira||{};xing.jira.TableBuilder=(function(c){function d(e){return"text" in e?e.text:""}function a(f,h){h=" "+(h||"");var j=f.options||{},g="cssClass" in j?j.cssClass:"",i="",k;c.extend(j,{cssClass:g+h});if(j.cssClass===" "){delete j.cssClass}for(k in j){var e=k==="cssClass"?"class":k,l=j[k]||"";e=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();i+=" "+e+'="'+l+'"'}return i}var b={row:function(f,g){var e="";c(g).each(function(i,h){e+=b.cell(h)});return"<tr"+a(g)+">"+e+"</tr>"},cell:function(h){var g=h.cell,f="",e=h.head?"th":"td";f+=b.cellTitle(g);f+=b.cellBody(g);return"<"+e+a(g)+'><div class="gm-inner">'+f+"</div></"+e+">"},cellBody:function(g){var f="";if("body" in g){var e=g.body;f+="<div"+a(e,"gm-bd")+">"+d(e)+"</div>"}return f},cellTitle:function(f){var e="";if("title" in f){var g=f.title;e+="<div"+a(g,"gm-hd")+">"+d(g)+"</div>"}return e},build:function(f){var e="";c(f).each(function(g,h){e+=b.row(g,h)});return'<table class="gm-table">'+e+"</table>"}};return b}(jQuery));var xing=xing||{};xing.jira=xing.jira||{};xing.jira.Application=(function(e){function d(h){var g=e(h.target),i=g.hasClass("gm-container")&&g||g.parents(".gm-container");if(!i[0]){a()}}function a(g){e("#gm-popup").remove();e(document).unbind("click",d)}function c(){if(e(".gm-show-popup")[0]){return false}var i=e('<li class="toolbar-item"></li>'),h=e('<a href="#print" class="gm-show-popup toolbar-trigger">Print Card</a>'),g=e(".toolbar-group");e(g[g.length-1]).append(i.append(h));h.bind("click",function(j){j.preventDefault();b.showPopup();setTimeout(function(){e(document).click(d)},1)})}function f(){e("#gm-popup").remove();var g=xing.jira.TableBuilder,h=xing.jira.tableFormat(xing.jira.DataCollector.data);e("body").append(e('<div id="gm-popup"><div class="gm-container aui-popup box-shadow"><h2 class="aui-popup-heading">Print preview</h2><div class="aui-popup-content"><div class="form-body">'+g.build(h)+'</div><div class="buttons-container form-footer"><div class="buttons"><button class="gm-print aui-button">Print</button><a class="gm-cancel cancel" href="#">Cancel</a></div></div></div></div><div class="aui-blanket"></div></div>'))}var b={addStyle:function(h){var g,i=document.getElementById("gm-style");g=document.getElementsByTagName("head")[0];if(!i){if(!g){return}i=document.createElement("style");i.setAttribute("id","gm-style");i.type="text/css";i.media="screen,print";g.appendChild(i)}i.innerHTML+=h+"\n"},showPopup:function(){if(e("#gm-popup")[0]){return false}xing.jira.DataCollector.subscribe(this);f();e(".gm-container").delegate(".gm-print","click",function(g){g.preventDefault();window.print()}).delegate(".gm-cancel","click",function(g){g.preventDefault();a()});e("body").on("click","#gm-add-collaborator",function(){xing.jira.DataCollector.addCollaborators()})},update:function(){f()},init:function(g){b.addStyle(g);c()}};return b}(jQuery));;xing.jira.Application.init('.gm-table{border-collapse:collapse;font:10pt helvetica,arial,sans-serif;background-color:#FFF;width:100%}.gm-table,.gm-table th,.gm-table td{border:1px solid #DDD}.gm-table td{vertical-align:top}.gm-hd{color:#999;font-size:.8em;line-height:1.4em;text-transform:uppercase;text-align:left}.h1{font-size:3em}.h2{font-size:2.4em}.h4{font-size:1.4em;line-height:1.5em}.h5{font-size:.8em;line-height:1.4em}.gm-snap-left{float:left}.gm-10{width:10%}.gm-20{width:20%}.gm-center{text-align:center}.gm-left{text-align:left}.gm-title .gm-inner{overflow:hidden;padding-bottom:0}.gm-hyphen{-wekit-hyphens:auto;-moz-hyphens:auto;-ms-hyphens:auto;-o-hyphens:auto;hyphens:auto}.gm-inner{padding:2mm 3mm}.gm-desc .gm-inner{overflow:hidden;padding-bottom:0}.gm-number .gm-bd{word-break:break-all}.gm-pairing .gm-inner{overflow:hidden}.gm-pairing .gm-hd{padding-right:3mm}.gm-pairing .gm-bd{overflow:hidden}.gm-qa .gm-bd{border:1px solid #DDD;-webkit-border-radius:2em;-moz-border-radius:2em;-ms-border-radius:2em;-o-border-radius:2em;border-radius:2em;height:40px;margin:auto;width:40px}.gm-date-content .gm-hd{padding:0 0 1px;text-align:center}.gm-date-content .gm-bd{color:#DDD;font-size:.7em;text-align:center;text-transform:uppercase}.gm-container .gm-print{margin:0 10px 0 0}@media print{html,body{background-color:white}.gm-hd{color:#999}#page,.aui-blanket,.gm-container .form-footer,.gm-container .aui-popup-heading,#gm-add-collaborator{display:none}.gm-container{-webkit-box-shadow:none!important;-moz-box-shadow:none!important;-ms-box-shadow:none!important;-o-box-shadow:none!important;box-shadow:none!important;left:0;margin:0;padding:0;position:absolute;top:0;width:100%;z-index:2501}.gm-container .form-body{padding:0!important}}@media screen{.gm-container{left:50%;margin-left:-9cm;margin-top:5%;top:0;width:18.9cm}.gm-container .form-body{padding:2mm!important}}');xing.jira.Application.showPopup()})();